<html>
<head>
  <title>Lede</title>
  <link href='http://fonts.googleapis.com/css?family=Andada' rel='stylesheet' type='text/css'>
  <link href='/stylesheets/main.css' media='all' rel='stylesheet' type='text/css'>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
  <script type='text/javascript'>
    $(function() {

      // animation
      setTimeout(function() {
        $('.tagline').fadeIn(1000, function() {
          setTimeout(function() {
            $('.logo-wrapper').fadeOut(500, function() {
              $('.signup-wrapper').fadeIn(500);
            });
          }, 500);
        })
      }, 500);

      function register() {
        $.ajax('/api/user/register', {
          data: {
            'user_email': $('#email').val()
          },
          type: 'PUT',
          success: function() {
          }
        });
        $('#step-2').fadeIn(500);
      }

      // handlers for form

      $('a#signup-button').click(function(evt) {
        register();
        evt.preventDefault();
      });

      $('form#signup').submit(function(evt) {
        register();
        evt.preventDefault();
      });

      $('a#bookmarklet').bind('dragend', function(evt) {
        $('#step-3').fadeIn(500);
        setTimeout(function() {
          $('#step-4').fadeIn(500);
          setTimeout(function() {
            $('.thanks').fadeIn(500);
            setTimeout(function() {
              $('.fun').fadeIn(500);
            }, 10000);
          }, 1000);
        }, 2300);
      });
    });
  </script>
</head>
<body>
  <div class='signin-link'>
    Already a Lede-er?  <a href='login.html'>Sign in</a>.
  </div>
  <div class='logo-wrapper'>
    <div class='logo'>
      <div class='mark'>
        <div class='box'></div>
        <div class='line'></div>
        <div class='line'></div>
      </div> 
      <h1> Lede </h1>
    </div>
    <p class='tagline' style='display:none'>don't follow</p>
  </div>
  <div class='signup-wrapper' style='display:none'>
    <h1> Thanks for helping us develop Lede! </h1>
    <h2> To get started: </h2>
    <form id='signup'>
      <ol>
        <li> 
          Enter your
          <input type='text' id='email' placeholder='email'></input>
          <a href='#' id='signup-button' class='button'> Ready! </a>
        </li>
        <li style='display:none' id='step-2'>
          Drag the
          <a href="javascript:(function(){var js_loader = function(source) {var script = document.createElement('SCRIPT');script.type = 'text/javascript';script.src = source;document.getElementsByTagName('head')[0].appendChild(script);}; js_loader('https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');js_loader('http://unburythelede.com/bookmarklet/bundle.js');setTimeout(function() { var img = new Image(); var query = '?target=' + encodeURIComponent(window.location.href) + '&title=' + encodeURIComponent(document.title) + '&no_cache=' + Math.random(); img.src = 'http://unburythelede.com/api/lede' + query; document.body.appendChild(img)}, 500)})();" class='button' id='bookmarklet'> Lede This! </a>
          button to your bookmarklet bar.
        </li>
        <li style='display:none' id='step-3'>
          When you read something you like in your daily browsing, click the bookmarklet.
        </li>
      </ol>
    </form>
    <div class='thanks' style='display:none'>
      <p>
        In return we'll deliver a special package to your inbox each morning.
        <br/><br/>
        Cheers!
        <br/>
        &nbsp;&nbsp;&nbsp;&mdash; The Lede Team
      </p>
    </div>
    <div class='fun' style='display:none'>
      <h2> What are you still doing here? </h2>
      <h3> Go Lede <a href='http://somerville.patch.com/'>something</a>! </h3>
    </div>
  </div>
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36275380-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</body>
</html>
